name: RawTherapee
buildsystem: cmake-ninja
builddir: true
config-opts:
  - -DCMAKE_BUILD_TYPE=RelWithDebInfo
sources:
  - type: archive
    url: https://github.com/Beep6581/RawTherapee/releases/download/5.7/rawtherapee-5.7.tar.xz
    sha256: dbd7c7cf7488fb97c520821eee2c745291637644b391e3ec0ed3a29701f1a9c7
  # https://github.com/Beep6581/RawTherapee/pull/5460
  - type: patch
    path: RawTherapee-5.7-xdg.patch
post-install:
  - xmlstarlet ed --inplace -d "/component/provides/binary[text()='rawtherapee-cli']" "${FLATPAK_DEST}/share/metainfo/${FLATPAK_ID}.appdata.xml";
  - install -p -D -m 0644 "../LICENSE.txt" -t "${FLATPAK_DEST}/share/licenses/rawtherapee/";
modules:
  - gtkmm.yaml
  - lensfun.yaml
  - exiv2.yaml
  - libiptcdata.yaml
  - fftw3f.yaml
  - xmlstarlet.yaml
